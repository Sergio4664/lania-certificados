<div class="container">
  <header class="header">
    <h1>Gesti√≥n de Administradores</h1>
    <button class="primary-btn" (click)="toggleForm()">
      {{ showForm ? 'Cancelar' : 'Nuevo Administrador' }}
    </button>
  </header>

  <!-- Formulario de Creaci√≥n / Edici√≥n -->
  <div *ngIf="showForm" class="form-card">
    <h3>{{ isEditing ? 'Editar' : 'Registrar' }} Administrador</h3>
    <form [formGroup]="adminForm" (ngSubmit)="onSubmit()">
      
      <div class="form-group">
        <label for="nombre_completo">Nombre Completo *</label>
        <input id="nombre_completo" formControlName="nombre_completo" required>
      </div>

      <div class="form-group">
        <label for="email_institucional">Email Institucional *</label>
        <input id="email_institucional" type="email" formControlName="email_institucional" required>
      </div>

      <div class="form-group">
        <label for="password">{{ isEditing ? 'Nueva Contrase√±a (Opcional)' : 'Contrase√±a *' }}</label>
        <input id="password" type="password" formControlName="password">
      </div>

      <div class="form-group">
        <label for="telefono">Tel√©fono</label>
        <input id="telefono" formControlName="telefono">
      </div>

      <div class="form-group">
        <label for="whatsapp">WhatsApp</label>
        <input id="whatsapp" formControlName="whatsapp">
      </div>

      <div class="form-actions">
        <button type="button" class="secondary-btn" (click)="toggleForm()">Cancelar</button>
        <button type="submit" class="primary-btn" [disabled]="adminForm.invalid">
          {{ isEditing ? 'Actualizar' : 'Crear' }}
        </button>
      </div>
    </form>
  </div>

  <!-- Tabla de Administradores -->
  <div class="data-table">
    <table>
      <thead>
        <tr>
          <th>Nombre Completo</th>
          <th>Email Institucional</th>
          <th>Contacto</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let admin of administradores">
          <td>{{ admin.nombre_completo }}</td>
          <td>{{ admin.email_institucional }}</td>
          <td>
            <div class="contact-info">
              <span *ngIf="admin.telefono">Tel: {{ admin.telefono }}</span>
              <span *ngIf="admin.whatsapp">WA: {{ admin.whatsapp }}</span>
            </div>
          </td>
          <td>
            <span class="status" [class.status-active]="admin.activo" [class.status-inactive]="!admin.activo">
              {{ admin.activo ? 'Activo' : 'Inactivo' }}
            </span>
          </td>
          <td class="actions">
            <button class="icon-btn edit" (click)="toggleForm(admin)" title="Editar">‚úèÔ∏è</button>
            <button class="icon-btn delete" (click)="deleteAdmin(admin)" title="Eliminar">üóëÔ∏è</button>
          </td>
        </tr>
         <tr *ngIf="!isLoading && administradores.length === 0">
          <td colspan="5" style="text-align: center;">No hay administradores registrados.</td>
        </tr>
        <tr *ngIf="isLoading">
          <td colspan="5" style="text-align: center;">Cargando...</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>